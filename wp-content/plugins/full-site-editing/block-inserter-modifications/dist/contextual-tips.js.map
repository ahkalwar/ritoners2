{"version":3,"file":"contextual-tips.js","mappings":"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","sources":["webpack://EditingToolkit/./editing-toolkit-plugin/block-inserter-modifications/contextual-tips/contextual-tip.js","webpack://EditingToolkit/./editing-toolkit-plugin/block-inserter-modifications/contextual-tips/list.js","webpack://EditingToolkit/./editing-toolkit-plugin/block-inserter-modifications/contextual-tips/tip-link.js","webpack://EditingToolkit/./editing-toolkit-plugin/block-inserter-modifications/contextual-tips/utils.js","webpack://EditingToolkit/external window \"lodash\"","webpack://EditingToolkit/external window [\"wp\",\"blockEditor\"]","webpack://EditingToolkit/external window [\"wp\",\"components\"]","webpack://EditingToolkit/external window [\"wp\",\"compose\"]","webpack://EditingToolkit/external window [\"wp\",\"data\"]","webpack://EditingToolkit/external window [\"wp\",\"element\"]","webpack://EditingToolkit/external window [\"wp\",\"i18n\"]","webpack://EditingToolkit/external window [\"wp\",\"plugins\"]","webpack://EditingToolkit/webpack/bootstrap","webpack://EditingToolkit/webpack/runtime/compat get default export","webpack://EditingToolkit/webpack/runtime/define property getters","webpack://EditingToolkit/webpack/runtime/hasOwnProperty shorthand","webpack://EditingToolkit/webpack/runtime/make namespace object","webpack://EditingToolkit/./editing-toolkit-plugin/block-inserter-modifications/contextual-tips.js"],"sourcesContent":["import { Tip } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { get, filter, deburr, lowerCase, includes } from 'lodash';\nimport tipsList from './list';\n\nfunction ContextualTip( { searchTerm, random = false, canUserCreate } ) {\n\tif ( ! searchTerm ) {\n\t\treturn null;\n\t}\n\n\tif ( ! tipsList.length ) {\n\t\treturn null;\n\t}\n\n\tconst normalizedSearchTerm = deburr( lowerCase( searchTerm ) ).replace( /^\\//, '' );\n\n\tconst foundTips = filter(\n\t\ttipsList,\n\t\t( { keywords, permission } ) =>\n\t\t\tcanUserCreate( permission ) &&\n\t\t\tfilter( [ ...new Set( keywords ) ], ( keyword ) => includes( normalizedSearchTerm, keyword ) )\n\t\t\t\t.length\n\t);\n\n\tif ( ! foundTips.length ) {\n\t\treturn null;\n\t}\n\n\tconst index = random ? Math.floor( Math.random() * foundTips.length ) : 0;\n\n\treturn (\n\t\t<div className=\"contextual-tip\">\n\t\t\t<Tip>{ get( foundTips, [ index, 'description' ] ) }</Tip>\n\t\t</div>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tcanUserCreate: ( type ) => select( 'core' ).canUser( 'create', type ),\n\t\t};\n\t} )\n)( ContextualTip );\n","import { createInterpolateElement } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport TipLink from './tip-link';\n\nfunction getTipDescription( text, conversion, textFallback ) {\n\tif ( typeof createInterpolateElement !== 'undefined' ) {\n\t\treturn createInterpolateElement( text, conversion );\n\t}\n\n\treturn textFallback;\n}\n\nconst tips = [\n\t{\n\t\tcontext: 'theme',\n\t\tkeywords: [ 'theme', __( 'theme', 'full-site-editing' ) ],\n\t\tdescription: getTipDescription(\n\t\t\t__(\n\t\t\t\t'You can visit the <a>theme directory</a> to select a different design for your site.',\n\t\t\t\t'full-site-editing'\n\t\t\t),\n\t\t\t{\n\t\t\t\ta: <TipLink section=\"themes\" />,\n\t\t\t},\n\t\t\t__(\n\t\t\t\t'You can visit the theme directory to select a different design for your site.',\n\t\t\t\t'full-site-editing'\n\t\t\t)\n\t\t),\n\t\tpermission: 'settings',\n\t},\n\t{\n\t\tcontext: 'css',\n\t\tkeywords: [\n\t\t\t'css',\n\t\t\t__( 'css', 'full-site-editing' ),\n\t\t\t'style',\n\t\t\t__( 'style', 'full-site-editing' ),\n\t\t],\n\t\tdescription: getTipDescription(\n\t\t\t__(\n\t\t\t\t'You can visit the the <a>Customizer</a> to edit the CSS on your site.',\n\t\t\t\t'full-site-editing'\n\t\t\t),\n\t\t\t{\n\t\t\t\ta: <TipLink section=\"customizer\" subsection=\"custom_css\" />,\n\t\t\t},\n\t\t\t__( 'You can visit the the Customizer to edit the CSS on your site.', 'full-site-editing' )\n\t\t),\n\t\tpermission: 'settings',\n\t},\n\t{\n\t\tcontext: 'plugin',\n\t\tkeywords: [ 'plugin', __( 'plugin', 'full-site-editing' ) ],\n\t\tdescription: getTipDescription(\n\t\t\t__(\n\t\t\t\t'You can visit the <a>plugin directory</a> to get started with installing new plugins.',\n\t\t\t\t'full-site-editing'\n\t\t\t),\n\t\t\t{\n\t\t\t\ta: <TipLink section=\"plugins\" />,\n\t\t\t},\n\t\t\t__(\n\t\t\t\t'You can visit the plugin directory to get started with installing new plugins.',\n\t\t\t\t'full-site-editing'\n\t\t\t)\n\t\t),\n\t\tpermission: 'settings',\n\t},\n\t{\n\t\tcontext: 'header',\n\t\tkeywords: [ 'header', __( 'header', 'full-site-editing' ) ],\n\t\tdescription: getTipDescription(\n\t\t\t__(\n\t\t\t\t'You can visit the the <a>Customizer</a> to edit your logo and site title.',\n\t\t\t\t'full-site-editing'\n\t\t\t),\n\t\t\t{\n\t\t\t\ta: <TipLink section=\"customizer\" subsection=\"title_tagline\" />,\n\t\t\t},\n\t\t\t__(\n\t\t\t\t'You can visit the the Customizer to edit your logo and site title.',\n\t\t\t\t'full-site-editing'\n\t\t\t)\n\t\t),\n\t\tpermission: 'settings',\n\t},\n\t{\n\t\tcontext: 'color',\n\t\tkeywords: [ 'color', __( 'color', 'full-site-editing' ) ],\n\t\tdescription: getTipDescription(\n\t\t\t__(\n\t\t\t\t'You can visit the the <a>Customizer</a> to edit the colors on your site.',\n\t\t\t\t'full-site-editing'\n\t\t\t),\n\t\t\t{\n\t\t\t\ta: <TipLink section=\"customizer\" subsection=\"colors\" />,\n\t\t\t},\n\t\t\t__( 'You can visit the the Customizer to edit the colors on your site.', 'full-site-editing' )\n\t\t),\n\t\tpermission: 'settings',\n\t},\n];\n\nexport default tips;\n","import { select } from '@wordpress/data';\nimport { inIframe, isSimpleSite } from './utils';\n\nconst isEditorIFramed = inIframe();\n\nexport default function ( { section, children, subsection } ) {\n\tconst { hostname } = window.location;\n\tconst editorSelector = select( 'core/editor' );\n\tconst postId = editorSelector.getCurrentPostId();\n\tconst postType = editorSelector.getCurrentPostType();\n\tconst returnLink =\n\t\tisEditorIFramed && ! isSimpleSite\n\t\t\t? '&' +\n\t\t\t  encodeURIComponent( `return=https://wordpress.com/${ postType }/${ hostname }/${ postId }` )\n\t\t\t: '';\n\tconst autofocus = `autofocus[section]=${ subsection }`;\n\n\tlet href = '#';\n\n\tswitch ( section ) {\n\t\tcase 'themes':\n\t\t\thref = isEditorIFramed ? `https://wordpress.com/themes/${ hostname }` : './themes.php';\n\t\t\tbreak;\n\n\t\tcase 'plugins':\n\t\t\thref =\n\t\t\t\tisEditorIFramed || isSimpleSite\n\t\t\t\t\t? `https://wordpress.com/plugins/${ hostname }`\n\t\t\t\t\t: './plugin-install.php';\n\t\t\tbreak;\n\n\t\tcase 'customizer':\n\t\t\thref =\n\t\t\t\tisEditorIFramed && isSimpleSite\n\t\t\t\t\t? `https://wordpress.com/customize/${ hostname }?${ autofocus }`\n\t\t\t\t\t: `./customize.php?${ autofocus }${ returnLink }`;\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<a href={ href } target=\"_blank\" rel=\"noreferrer noopener\">\n\t\t\t{ children }\n\t\t</a>\n\t);\n}\n","/**\n * Detect if the editor is already iFramed.\n *\n * @returns {boolean} `True` is the editor is iFramed. Otherwise, `False`.\n */\nexport const inIframe = () => {\n\ttry {\n\t\treturn window.self !== window.top;\n\t} catch ( e ) {\n\t\treturn true;\n\t}\n};\n\nexport const isSimpleSite = !! (\n\twindow &&\n\twindow._currentSiteType &&\n\twindow._currentSiteType === 'simple'\n);\n","module.exports = window[\"lodash\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\n\t__unstableInserterMenuExtension,\n\t__experimentalInserterMenuExtension,\n} from '@wordpress/block-editor';\nimport { useState } from '@wordpress/element';\nimport { registerPlugin } from '@wordpress/plugins';\nimport { debounce } from 'lodash';\nimport ContextualTip from './contextual-tips/contextual-tip';\n\nimport './contextual-tips/style.scss';\n\n// InserterMenuExtension has been made unstable in this PR: https://github.com/WordPress/gutenberg/pull/31417 / Gutenberg v10.7.0-rc.1.\n// We need to support both symbols until we're sure Gutenberg < v10.7.x is not used anymore in WPCOM.\nconst InserterMenuExtension =\n\ttypeof __unstableInserterMenuExtension !== 'undefined'\n\t\t? __unstableInserterMenuExtension\n\t\t: __experimentalInserterMenuExtension;\n\nconst ContextualTips = function () {\n\tconst [ debouncedFilterValue, setFilterValue ] = useState( '' );\n\n\tconst debouncedSetFilterValue = debounce( setFilterValue, 400 );\n\n\treturn (\n\t\t<InserterMenuExtension>\n\t\t\t{ ( { filterValue, hasItems } ) => {\n\t\t\t\tif ( hasItems || ! filterValue ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif ( debouncedFilterValue !== filterValue ) {\n\t\t\t\t\tdebouncedSetFilterValue( filterValue );\n\t\t\t\t}\n\n\t\t\t\treturn <ContextualTip searchTerm={ filterValue } />;\n\t\t\t} }\n\t\t</InserterMenuExtension>\n\t);\n};\n\n// Check if the experimental slot is available before to register plugin.\nif ( typeof InserterMenuExtension !== 'undefined' ) {\n\tregisterPlugin( 'block-inserter-contextual-tips', {\n\t\trender() {\n\t\t\treturn <ContextualTips />;\n\t\t},\n\t} );\n}\n"],"names":["compose","withSelect","select","canUserCreate","type","canUser","searchTerm","random","tipsList","normalizedSearchTerm","deburr","lowerCase","replace","foundTips","filter","keywords","permission","Set","keyword","includes","length","index","Math","floor","className","Tip","get","getTipDescription","text","conversion","textFallback","createInterpolateElement","tips","context","__","description","a","section","subsection","isEditorIFramed","inIframe","children","hostname","window","location","editorSelector","postId","getCurrentPostId","postType","getCurrentPostType","returnLink","isSimpleSite","encodeURIComponent","autofocus","href","target","rel","self","top","e","_currentSiteType","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","InserterMenuExtension","__unstableInserterMenuExtension","__experimentalInserterMenuExtension","ContextualTips","debouncedFilterValue","setFilterValue","useState","debouncedSetFilterValue","debounce","filterValue","hasItems","registerPlugin","render"],"sourceRoot":""}