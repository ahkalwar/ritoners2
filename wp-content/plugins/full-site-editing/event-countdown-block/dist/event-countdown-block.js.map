{"version":3,"file":"event-countdown-block.js","mappings":"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","sources":["webpack://EditingToolkit/./editing-toolkit-plugin/event-countdown-block/blocks/src/edit.js","webpack://EditingToolkit/./editing-toolkit-plugin/event-countdown-block/blocks/src/icon.js","webpack://EditingToolkit/./editing-toolkit-plugin/event-countdown-block/blocks/src/index.js","webpack://EditingToolkit/./editing-toolkit-plugin/event-countdown-block/blocks/src/view.js","webpack://EditingToolkit/external window \"moment\"","webpack://EditingToolkit/external window [\"wp\",\"blocks\"]","webpack://EditingToolkit/external window [\"wp\",\"components\"]","webpack://EditingToolkit/external window [\"wp\",\"date\"]","webpack://EditingToolkit/external window [\"wp\",\"element\"]","webpack://EditingToolkit/external window [\"wp\",\"i18n\"]","webpack://EditingToolkit/webpack/bootstrap","webpack://EditingToolkit/webpack/runtime/compat get default export","webpack://EditingToolkit/webpack/runtime/define property getters","webpack://EditingToolkit/webpack/runtime/hasOwnProperty shorthand","webpack://EditingToolkit/webpack/runtime/make namespace object"],"sourcesContent":["/* eslint-disable wpcalypso/jsx-classname-namespace */\n// disabled CSS class rule due to existing code already\n// that users the non-conformant classnames\n\nimport { Button, DateTimePicker, Dropdown, Placeholder } from '@wordpress/components';\nimport { dateI18n, __experimentalGetSettings } from '@wordpress/date';\nimport { __ } from '@wordpress/i18n';\nimport moment from 'moment';\nimport { EventCountdownIcon } from './icon';\n\nconst TIMEZONELESS_FORMAT = 'YYYY-MM-DDTHH:mm:ss';\n\n/**\n * Assigns timezone to a date without altering it\n *\n * @param {string} date a date in YYYY-MM-DDTHH:mm:ss format\n * @param {number} offset the offset in hours\n * @returns a moment instance\n */\nfunction assignTimezone( date, offset, format = TIMEZONELESS_FORMAT ) {\n\t// passing the `true` flag to `utcOffset` keeps the date unaltered, only adds a tz\n\treturn moment( date, format ).utcOffset( offset * 60, true );\n}\n\nconst edit = ( { attributes, setAttributes, className } ) => {\n\tconst settings = __experimentalGetSettings();\n\n\tlet label = __( 'Choose Date', 'full-site-editing' );\n\tlet eventDate;\n\n\tif ( attributes.eventTimestamp ) {\n\t\tlabel = dateI18n(\n\t\t\tsettings.formats.datetimeAbbreviated,\n\t\t\t// eventTimestamp is UNIX (in seconds), Date expect milliseconds\n\t\t\tnew Date( attributes.eventTimestamp * 1000 )\n\t\t);\n\n\t\t// the DateTimePicker requires the date to be in this format\n\t\t// we offset the date by the site timezone settings to counteract the Datepicker automatic adjustment to the client-side timezone\n\t\teventDate = moment( attributes.eventTimestamp * 1000 )\n\t\t\t.utcOffset( settings.timezone.offset * 60 )\n\t\t\t.format( TIMEZONELESS_FORMAT );\n\t} else if ( attributes.eventDate ) {\n\t\t// backwards compatibility\n\t\tconst siteTimeZoneAdjustedTime = assignTimezone(\n\t\t\tattributes.eventDate,\n\t\t\tNumber.parseFloat( settings.timezone.offset ) // offset can be a string if a manual timezone is selected\n\t\t);\n\n\t\tlabel = dateI18n( settings.formats.datetimeAbbreviated, siteTimeZoneAdjustedTime );\n\t\teventDate = attributes.eventDate;\n\t}\n\n\treturn (\n\t\t<Placeholder\n\t\t\tlabel={ __( 'Event Countdown', 'full-site-editing' ) }\n\t\t\tinstructions={ __(\n\t\t\t\t'Count down to an event. Set a title and pick a time and date.',\n\t\t\t\t'full-site-editing'\n\t\t\t) }\n\t\t\ticon={ <EventCountdownIcon /> }\n\t\t\tclassName={ className }\n\t\t>\n\t\t\t<div>\n\t\t\t\t<strong>{ __( 'Title:', 'full-site-editing' ) }</strong>\n\t\t\t\t<br />\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={ attributes.eventTitle }\n\t\t\t\t\tonChange={ ( evt ) => setAttributes( { eventTitle: evt.target.value } ) }\n\t\t\t\t\tplaceholder={ __( 'Event Title', 'full-site-editing' ) }\n\t\t\t\t\tclassName=\"event-countdown__event-title\"\n\t\t\t\t\taria-label={ __( 'Event Title', 'full-site-editing' ) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<strong>{ __( 'Date:', 'full-site-editing' ) }</strong>\n\t\t\t\t<br />\n\t\t\t\t<Dropdown\n\t\t\t\t\tposition=\"bottom left\"\n\t\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => (\n\t\t\t\t\t\t<Button onClick={ onToggle } aria-expanded={ isOpen } aria-live=\"polite\" isSecondary>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<DateTimePicker\n\t\t\t\t\t\t\tkey=\"event-countdown-picker\"\n\t\t\t\t\t\t\tonChange={ ( date ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\teventTimestamp: assignTimezone( date, settings.timezone.offset ).unix(),\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcurrentDate={ eventDate }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Placeholder>\n\t);\n};\n\nexport default edit;\n","import { Path, SVG } from '@wordpress/components';\n\nexport const EventCountdownIcon = () => (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n\t\t<Path d=\"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z\" />\n\t</SVG>\n);\n","import { registerBlockType } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport edit from './edit';\nimport { EventCountdownIcon } from './icon';\nimport view from './view';\n\nimport './editor.scss';\nimport './style.scss';\n\nregisterBlockType( 'jetpack/event-countdown', {\n\ttitle: __( 'Event Countdown', 'full-site-editing' ),\n\tdescription: __(\n\t\t'Count down to your favorite next thing, and celebrate with fireworks when the time is right!',\n\t\t'full-site-editing'\n\t),\n\ticon: EventCountdownIcon,\n\tcategory: 'widgets',\n\tsupports: {\n\t\talign: [ 'wide', 'full' ],\n\t},\n\texample: {\n\t\tattributes: {\n\t\t\teventTimestamp: 1318874398,\n\t\t\teventTitle: 'Total Solar Eclipse',\n\t\t},\n\t},\n\tattributes: {\n\t\teventTitle: {\n\t\t\ttype: 'string',\n\t\t\tsource: 'text',\n\t\t\tselector: '.event-countdown__event-title',\n\t\t},\n\t\teventTimestamp: {\n\t\t\ttype: 'number',\n\t\t},\n\t},\n\n\tedit: ( props ) => {\n\t\tif ( props.isSelected ) {\n\t\t\treturn edit( props );\n\t\t}\n\t\treturn view( { ...props, isEditView: true } );\n\t},\n\tsave: view,\n\tdeprecated: [\n\t\t{\n\t\t\tattributes: {\n\t\t\t\teventTitle: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\tsource: 'text',\n\t\t\t\t\tselector: '.event-countdown__event-title',\n\t\t\t\t},\n\t\t\t\teventDate: {\n\t\t\t\t\ttype: 'string',\n\t\t\t\t},\n\t\t\t},\n\t\t\t// the new `view` function can handle the deprecated attributes\n\t\t\tsave: view,\n\t\t},\n\t],\n} );\n","/* eslint-disable wpcalypso/jsx-classname-namespace */\n// disabled CSS class rule due to existing code already\n// that users the non-conformant classnames\n\nimport { __, _x } from '@wordpress/i18n';\n\nconst view = ( { attributes, className, isEditView } ) => {\n\t// Expected values in save.\n\tlet days = '&nbsp;';\n\tlet hours = '&nbsp;';\n\tlet mins = '&nbsp;';\n\tlet secs = '&nbsp;';\n\tif ( isEditView ) {\n\t\t// Zero out.\n\t\tdays = hours = mins = secs = 0;\n\t\tlet eventTime;\n\t\tif ( attributes.eventTimestamp ) {\n\t\t\teventTime = attributes.eventTimestamp * 1000;\n\t\t} else {\n\t\t\t// backwards compatibility\n\t\t\teventTime = new Date( attributes.eventDate ).getTime();\n\t\t}\n\t\tconst now = Date.now();\n\t\tconst diff = eventTime - now;\n\n\t\tif ( diff > 0 ) {\n\t\t\t// Convert diff to seconds.\n\t\t\tlet rem = Math.round( diff / 1000 );\n\n\t\t\tdays = Math.floor( rem / ( 24 * 60 * 60 ) );\n\t\t\trem = rem - days * 24 * 60 * 60;\n\n\t\t\thours = Math.floor( rem / ( 60 * 60 ) );\n\t\t\trem = rem - hours * 60 * 60;\n\n\t\t\tmins = Math.floor( rem / 60 );\n\t\t\trem = rem - mins * 60;\n\n\t\t\tsecs = rem;\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<div className=\"event-countdown__date\">\n\t\t\t\t{ attributes.eventTimestamp || attributes.eventDate }\n\t\t\t</div>\n\t\t\t<div className=\"event-countdown__counter\">\n\t\t\t\t<p>\n\t\t\t\t\t<strong className=\"event-countdown__day\">{ days }</strong>{ ' ' }\n\t\t\t\t\t{ _x( 'days', 'Countdown days remaining', 'full-site-editing' ) }\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<strong className=\"event-countdown__hour\">{ hours }</strong>{ ' ' }\n\t\t\t\t\t\t{ _x( 'hours', 'Countdown hours remaining', 'full-site-editing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<strong className=\"event-countdown__minute\">{ mins }</strong>{ ' ' }\n\t\t\t\t\t\t{ _x( 'minutes', 'Countdown minutes remaining', 'full-site-editing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<strong className=\"event-countdown__second\">{ secs }</strong>{ ' ' }\n\t\t\t\t\t\t{ _x( 'seconds', 'Countdown seconds remaining', 'full-site-editing' ) }\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t\t<p>{ __( 'until', 'full-site-editing' ) }</p>\n\t\t\t</div>\n\t\t\t<div className=\"event-countdown__event-title\">\n\t\t\t\t<p>{ attributes.eventTitle }</p>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default view;\n","module.exports = window[\"moment\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["TIMEZONELESS_FORMAT","assignTimezone","date","offset","format","moment","utcOffset","attributes","setAttributes","className","settings","__experimentalGetSettings","eventDate","label","__","eventTimestamp","dateI18n","formats","datetimeAbbreviated","Date","timezone","siteTimeZoneAdjustedTime","Number","parseFloat","Placeholder","instructions","icon","type","value","eventTitle","onChange","evt","target","placeholder","Dropdown","position","renderToggle","onToggle","isOpen","Button","onClick","isSecondary","renderContent","DateTimePicker","key","unix","currentDate","EventCountdownIcon","SVG","xmlns","width","height","viewBox","Path","d","registerBlockType","title","description","category","supports","align","example","source","selector","edit","props","isSelected","view","isEditView","save","deprecated","days","hours","mins","secs","eventTime","getTime","diff","now","rem","Math","round","floor","_x","module","exports","window","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","a","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"sourceRoot":""}